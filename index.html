<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hoodie Unlocked</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 25vh;
    }
    a {
      display: inline-block;
      margin-top: 24px;
      padding: 14px 28px;
      background: #fff;
      color: #000;
      text-decoration: none;
      font-weight: bold;
      border-radius: 8px;
    }
    .disabled {
      opacity: 0.5;
      pointer-events: none;
    }
  </style>
</head>

<body>

  <h1>ðŸ”“ Hoodie Unlocked</h1>
  <p>Exclusive AR experience activated</p>

  <p><strong>Hoodie ID:</strong> <span id="hoodieId">Checking...</span></p>
  <p id="status">Verifying conditionsâ€¦</p>

  <a id="lensLink" class="disabled">Loading Lensâ€¦</a>

<script>
  const params = new URLSearchParams(window.location.search);
  const hoodie = params.get("hoodie");

  const hoodieIdEl = document.getElementById("hoodieId");
  const statusEl = document.getElementById("status");
  const lensLink = document.getElementById("lensLink");

  hoodieIdEl.innerText = hoodie || "Not Assigned";

  // â° TIME CHECK
  const hour = new Date().getHours();
  const isNight = hour >= 18 || hour < 6;

  // ðŸ“ LOCATION CHECK
  navigator.geolocation.getCurrentPosition(
    (pos) => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;

      const isBangalore = lat > 12 && lat < 14 && lon > 77 && lon < 78;

      let lensURL = "";

      if (hoodie === "HD-157" && isBangalore && isNight) {
        lensURL = "https://www.snapchat.com/unlock/?uuid=NIGHT_BLR_LENS";
        statusEl.innerText = "Night drop unlocked ðŸŒ™ (Bangalore)";
      }
      else if (hoodie === "HD-157" && isBangalore) {
        lensURL = "https://www.snapchat.com/unlock/?uuid=DAY_BLR_LENS";
        statusEl.innerText = "Day experience unlocked â˜€ï¸ (Bangalore)";
      }
      else {
        lensURL = "https://www.snapchat.com/unlock/?uuid=GLOBAL_LENS";
        statusEl.innerText = "Global experience unlocked ðŸŒ";
      }

      lensLink.href = lensURL;
      lensLink.classList.remove("disabled");
      lensLink.innerText = "Open AR Lens";
    },
    () => {
      statusEl.innerText = "Location required to unlock experience";
    }
  );
</script>

</body>
</html>

